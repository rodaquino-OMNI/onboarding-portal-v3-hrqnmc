# Payment Service Environment Configuration
# ==========================================

# Service Configuration
SPRING_PROFILES_ACTIVE=development
SERVER_PORT=3007
SERVICE_NAME=payment-service
API_VERSION=v1
LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_COM_AUSTA=DEBUG

# Database Configuration (PostgreSQL + JPA/Hibernate)
SPRING_DATASOURCE_URL=jdbc:postgresql://postgres:5432/payment_service
SPRING_DATASOURCE_USERNAME=payment_user
SPRING_DATASOURCE_PASSWORD=your-db-password
SPRING_DATASOURCE_DRIVER_CLASS_NAME=org.postgresql.Driver
SPRING_JPA_DATABASE_PLATFORM=org.hibernate.dialect.PostgreSQLDialect
SPRING_JPA_HIBERNATE_DDL_AUTO=validate
SPRING_JPA_SHOW_SQL=false

# Connection Pool Configuration (HikariCP)
SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE=20
SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE=5
SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT=30000

# Flyway Migration Configuration
SPRING_FLYWAY_ENABLED=true
SPRING_FLYWAY_BASELINE_ON_MIGRATE=true
SPRING_FLYWAY_LOCATIONS=classpath:db/migration

# Redis Configuration (Caching)
SPRING_REDIS_HOST=redis
SPRING_REDIS_PORT=6379
SPRING_REDIS_PASSWORD=your-redis-password
SPRING_REDIS_DATABASE=3
SPRING_CACHE_TYPE=redis

# Security Configuration
ENCRYPTION_KEY=your-encryption-key-here-32-characters
JWT_SECRET=your-jwt-secret-here-min-32-characters
JWT_ISSUER=austa-onboarding
CORS_ALLOWED_ORIGINS=https://*.austa.com.br,http://localhost:3000

# Stripe Configuration (Credit Cards)
STRIPE_API_KEY=sk_test_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret
STRIPE_CURRENCY=BRL
STRIPE_ENABLE_3DS=true
STRIPE_CAPTURE_METHOD=automatic

# Mercado Pago Configuration (PIX, Credit Cards, Boleto)
MERCADOPAGO_ACCESS_TOKEN=your-mercadopago-access-token
MERCADOPAGO_PUBLIC_KEY=your-mercadopago-public-key
MERCADOPAGO_WEBHOOK_SECRET=your-webhook-secret
MERCADOPAGO_COUNTRY=BR

# PagSeguro Configuration (Alternative Brazilian Gateway)
PAGSEGURO_EMAIL=your-pagseguro-email
PAGSEGURO_TOKEN=your-pagseguro-token
PAGSEGURO_APP_ID=your-pagseguro-app-id
PAGSEGURO_APP_KEY=your-pagseguro-app-key
PAGSEGURO_ENVIRONMENT=sandbox

# PIX Configuration
PIX_ENABLED=true
PIX_QR_CODE_EXPIRY_MINUTES=30
PIX_KEY=your-pix-key
PIX_MERCHANT_NAME=AUSTA Saude
PIX_MERCHANT_CITY=Sao Paulo
PIX_GENERATE_QR_CODE=true

# Boleto Configuration
BOLETO_ENABLED=true
BOLETO_DEFAULT_DUE_DAYS=3
BOLETO_BANK_CODE=341
BOLETO_AGENCY=1234-5
BOLETO_ACCOUNT=12345678-9
BOLETO_MERCHANT_NAME=AUSTA Administradora de Beneficios Ltda
BOLETO_MERCHANT_CNPJ=12345678000199
BOLETO_MERCHANT_ADDRESS=Av Paulista 1000 Sao Paulo SP
BOLETO_INSTRUCTIONS=Pagamento referente a mensalidade do plano de saude
BOLETO_LATE_FEE_PERCENTAGE=2.0
BOLETO_DAILY_INTEREST_PERCENTAGE=0.033

# Credit Card Configuration
CREDIT_CARD_ENABLED=true
CREDIT_CARD_MIN_AMOUNT=50.00
CREDIT_CARD_MAX_AMOUNT=50000.00
CREDIT_CARD_ALLOW_INSTALLMENTS=true
CREDIT_CARD_MAX_INSTALLMENTS=12
CREDIT_CARD_MIN_INSTALLMENT_AMOUNT=100.00
CREDIT_CARD_ACCEPTED_BRANDS=VISA,MASTERCARD,ELO,HIPERCARD,AMEX

# Payment Processing Configuration
PAYMENT_MIN_AMOUNT=10.00
PAYMENT_MAX_AMOUNT=100000.00
PAYMENT_CURRENCY=BRL
PAYMENT_AUTO_CAPTURE=true
PAYMENT_REFUND_ALLOWED=true
PAYMENT_REFUND_DAYS_LIMIT=90
PAYMENT_PARTIAL_REFUND_ALLOWED=true

# Reconciliation Configuration
RECONCILIATION_ENABLED=true
RECONCILIATION_SCHEDULE=0 2 * * *
RECONCILIATION_LOOKBACK_DAYS=7
RECONCILIATION_AUTO_MATCH=true
RECONCILIATION_NOTIFY_DISCREPANCIES=true

# Webhook Configuration
WEBHOOK_ENABLED=true
WEBHOOK_TIMEOUT=10000
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY=5000
WEBHOOK_VERIFY_SIGNATURE=true
WEBHOOK_IDEMPOTENCY_ENABLED=true

# Policy Service Integration
POLICY_SERVICE_URL=http://policy-service:3005
POLICY_SERVICE_TIMEOUT=10000
VALIDATE_POLICY_ON_PAYMENT=true
REQUIRE_ACTIVE_POLICY=true

# Notification Service Integration
NOTIFICATION_SERVICE_URL=http://notification-service:3010
SEND_PAYMENT_CONFIRMATION_EMAIL=true
SEND_PAYMENT_CONFIRMATION_SMS=false
SEND_BOLETO_EMAIL=true
SEND_PIX_QR_CODE_EMAIL=true

# Audit Logging Configuration
AUDIT_LOG_ENABLED=true
AUDIT_LOG_INCLUDE_PAYLOAD=false
AUDIT_LOG_RETENTION_DAYS=90
LOG_GATEWAY_REQUESTS=true
LOG_GATEWAY_RESPONSES=true

# Resilience4j Circuit Breaker
RESILIENCE4J_CIRCUITBREAKER_INSTANCES_STRIPE_SLIDINGWINDOWSIZE=10
RESILIENCE4J_CIRCUITBREAKER_INSTANCES_STRIPE_FAILURERATETHRESHOLD=50
RESILIENCE4J_CIRCUITBREAKER_INSTANCES_STRIPE_WAITTIMEINDURATION=60000
RESILIENCE4J_CIRCUITBREAKER_INSTANCES_MERCADOPAGO_SLIDINGWINDOWSIZE=10
RESILIENCE4J_CIRCUITBREAKER_INSTANCES_MERCADOPAGO_FAILURERATETHRESHOLD=50

# Resilience4j Retry
RESILIENCE4J_RETRY_INSTANCES_STRIPE_MAXATTEMPTS=3
RESILIENCE4J_RETRY_INSTANCES_STRIPE_WAITDURATION=1000
RESILIENCE4J_RETRY_INSTANCES_MERCADOPAGO_MAXATTEMPTS=3
RESILIENCE4J_RETRY_INSTANCES_MERCADOPAGO_WAITDURATION=1000

# Metrics & Monitoring
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,metrics,prometheus,info
MANAGEMENT_METRICS_EXPORT_PROMETHEUS_ENABLED=true
MANAGEMENT_HEALTH_READINESS_PROBE_ENABLED=true
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=always

# PCI-DSS Compliance
PCI_DSS_COMPLIANT=true
STORE_CARD_NUMBER=false
STORE_CVV=false
TOKENIZE_CARD_DATA=true
ENCRYPT_SENSITIVE_DATA=true
KEY_ROTATION_DAYS=90
REQUIRE_3DS=false

# Anti-Fraud Configuration
FRAUD_DETECTION_ENABLED=true
FRAUD_CHECK_IP_REPUTATION=true
FRAUD_CHECK_VELOCITY=true
FRAUD_MAX_PAYMENTS_PER_HOUR=5
FRAUD_MAX_AMOUNT_PER_DAY=10000.00
FRAUD_BLOCK_SUSPICIOUS=false

# LGPD Compliance
DATA_RETENTION_DAYS=365
ANONYMIZE_CARD_DATA=true
MASK_SENSITIVE_LOGS=true
CONSENT_REQUIRED=true

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60

# OpenAPI/Swagger Documentation
SPRINGDOC_API_DOCS_PATH=/api-docs
SPRINGDOC_SWAGGER_UI_PATH=/swagger-ui.html
SPRINGDOC_SWAGGER_UI_ENABLED=true

# Azure Key Vault (Production)
AZURE_KEY_VAULT_URL=your-key-vault-url
AZURE_KEY_VAULT_ENCRYPTION_KEY_NAME=payment-encryption-key
AZURE_KEY_VAULT_STRIPE_KEY_NAME=stripe-api-key
AZURE_USE_MANAGED_IDENTITY=true

# Feature Flags
FEATURE_PIX_ENABLED=true
FEATURE_BOLETO_ENABLED=true
FEATURE_CREDIT_CARD_ENABLED=true
FEATURE_INSTALLMENTS_ENABLED=true
FEATURE_AUTO_RECONCILIATION_ENABLED=true
FEATURE_REFUND_ENABLED=true

# Mock Mode (Development/Testing)
MOCK_MODE_ENABLED=false
MOCK_PAYMENT_SUCCESS_RATE=80
MOCK_PAYMENT_DELAY_MS=1000
