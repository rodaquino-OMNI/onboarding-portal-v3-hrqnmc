# Enrollment Service Environment Configuration
# ==========================================

# Service Configuration
SPRING_PROFILES_ACTIVE=development
SERVER_PORT=3002
SERVICE_NAME=enrollment-service
API_VERSION=v1
LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_COM_AUSTA=DEBUG

# Database Configuration (PostgreSQL + JPA/Hibernate)
SPRING_DATASOURCE_URL=jdbc:postgresql://postgres:5432/enrollment_service
SPRING_DATASOURCE_USERNAME=enrollment_user
SPRING_DATASOURCE_PASSWORD=your-db-password
SPRING_DATASOURCE_DRIVER_CLASS_NAME=org.postgresql.Driver
SPRING_JPA_DATABASE_PLATFORM=org.hibernate.dialect.PostgreSQLDialect
SPRING_JPA_HIBERNATE_DDL_AUTO=validate
SPRING_JPA_SHOW_SQL=false
SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL=true
SPRING_JPA_PROPERTIES_HIBERNATE_JDBC_BATCH_SIZE=20
SPRING_JPA_PROPERTIES_HIBERNATE_ORDER_INSERTS=true
SPRING_JPA_PROPERTIES_HIBERNATE_ORDER_UPDATES=true

# Connection Pool Configuration (HikariCP)
SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE=20
SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE=5
SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT=30000
SPRING_DATASOURCE_HIKARI_IDLE_TIMEOUT=600000
SPRING_DATASOURCE_HIKARI_MAX_LIFETIME=1800000
SPRING_DATASOURCE_HIKARI_VALIDATION_TIMEOUT=5000

# Flyway Migration Configuration
SPRING_FLYWAY_ENABLED=true
SPRING_FLYWAY_BASELINE_ON_MIGRATE=true
SPRING_FLYWAY_LOCATIONS=classpath:db/migration
SPRING_FLYWAY_VALIDATE_ON_MIGRATE=true

# Redis Configuration (Caching)
SPRING_REDIS_HOST=redis
SPRING_REDIS_PORT=6379
SPRING_REDIS_PASSWORD=your-redis-password
SPRING_REDIS_DATABASE=1
SPRING_REDIS_TIMEOUT=2000
SPRING_CACHE_TYPE=redis
SPRING_CACHE_REDIS_TIME_TO_LIVE=3600000

# Security Configuration
ENCRYPTION_KEY=your-encryption-key-here-32-characters
ENCRYPTION_ALGORITHM=AES/GCM/NoPadding
JWT_SECRET=your-jwt-secret-here-min-32-characters
JWT_ISSUER=austa-onboarding
CORS_ALLOWED_ORIGINS=https://*.austa.com.br,http://localhost:3000

# Health Assessment Configuration
HEALTH_SERVICE_URL=http://health-service:3003
HEALTH_ASSESSMENT_TIMEOUT=30000
HEALTH_RISK_THRESHOLD_LOW=30
HEALTH_RISK_THRESHOLD_MEDIUM=60
HEALTH_RISK_THRESHOLD_HIGH=80

# Document Service Configuration
DOCUMENT_SERVICE_URL=http://document-service:3006
MAX_DOCUMENT_SIZE_MB=10
ALLOWED_DOCUMENT_TYPES=PDF,JPG,JPEG,PNG
DOCUMENT_ENCRYPTION_ENABLED=true
DOCUMENT_VIRUS_SCAN_ENABLED=true

# Policy Service Configuration
POLICY_SERVICE_URL=http://policy-service:3005
POLICY_CREATION_TIMEOUT=15000
AUTO_CREATE_POLICY_ON_APPROVAL=true

# Audit Logging Configuration
AUDIT_LOG_ENABLED=true
AUDIT_LOG_LEVEL=INFO
AUDIT_LOG_INCLUDE_REQUEST_BODY=false
AUDIT_LOG_INCLUDE_RESPONSE_BODY=false
AUDIT_LOG_RETENTION_DAYS=90

# Metrics & Monitoring
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,metrics,prometheus,info
MANAGEMENT_METRICS_EXPORT_PROMETHEUS_ENABLED=true
MANAGEMENT_HEALTH_READINESS_PROBE_ENABLED=true
MANAGEMENT_HEALTH_LIVENESS_PROBE_ENABLED=true
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=always

# Resilience4j Circuit Breaker
RESILIENCE4J_CIRCUITBREAKER_INSTANCES_HEALTH_SERVICE_SLIDINGWINDOWSIZE=10
RESILIENCE4J_CIRCUITBREAKER_INSTANCES_HEALTH_SERVICE_FAILURERATETHRESHOLD=50
RESILIENCE4J_CIRCUITBREAKER_INSTANCES_HEALTH_SERVICE_WAITTIMEINDURATION=60000
RESILIENCE4J_CIRCUITBREAKER_INSTANCES_DOCUMENT_SERVICE_SLIDINGWINDOWSIZE=10
RESILIENCE4J_CIRCUITBREAKER_INSTANCES_DOCUMENT_SERVICE_FAILURERATETHRESHOLD=50

# Resilience4j Retry
RESILIENCE4J_RETRY_INSTANCES_HEALTH_SERVICE_MAXATTEMPTS=3
RESILIENCE4J_RETRY_INSTANCES_HEALTH_SERVICE_WAITDURATION=1000
RESILIENCE4J_RETRY_INSTANCES_DOCUMENT_SERVICE_MAXATTEMPTS=3
RESILIENCE4J_RETRY_INSTANCES_DOCUMENT_SERVICE_WAITDURATION=1000

# Enrollment Workflow Configuration
ENROLLMENT_AUTO_APPROVE_THRESHOLD=70
ENROLLMENT_REQUIRE_HEALTH_ASSESSMENT=true
ENROLLMENT_REQUIRE_DOCUMENTS=true
ENROLLMENT_MIN_AGE=0
ENROLLMENT_MAX_AGE=100
ENROLLMENT_DEPENDENT_LIMIT=10

# Notification Configuration
NOTIFICATION_SERVICE_URL=http://notification-service:3010
SEND_EMAIL_ON_STATUS_CHANGE=true
SEND_SMS_ON_APPROVAL=true
EMAIL_FROM=noreply@austa.com.br
SMS_FROM=+5511999999999

# AUSTA Integration Configuration (Future)
AUSTA_DATALAKE_ENABLED=false
AUSTA_DATALAKE_URL=https://datalake.austa.com.br/api
AUSTA_DATALAKE_API_KEY=your-datalake-api-key
AUSTA_DATALAKE_SYNC_INTERVAL=3600000

AUSTA_EMR_ENABLED=false
AUSTA_EMR_FHIR_URL=https://emr.austa.com.br/fhir
AUSTA_EMR_CLIENT_ID=your-emr-client-id
AUSTA_EMR_CLIENT_SECRET=your-emr-client-secret

AUSTA_SUPERAPP_ENABLED=false
AUSTA_SUPERAPP_URL=https://superapp.austa.com.br/api
AUSTA_SUPERAPP_API_KEY=your-superapp-api-key

# Validation Configuration
VALIDATION_CPF_ENABLED=true
VALIDATION_EMAIL_ENABLED=true
VALIDATION_PHONE_ENABLED=true
VALIDATION_ADDRESS_ENABLED=true
VALIDATION_ALLOW_INCOMPLETE_ADDRESSES=false

# Data Masking Configuration
DATA_MASKING_ENABLED=true
DATA_MASKING_CPF_VISIBLE_DIGITS=4
DATA_MASKING_PHONE_VISIBLE_DIGITS=4
DATA_MASKING_EMAIL_PRESERVE_DOMAIN=true

# LGPD Compliance
DATA_RETENTION_DAYS=365
CONSENT_REQUIRED=true
ANONYMIZATION_ENABLED=true
RIGHT_TO_BE_FORGOTTEN_ENABLED=true
DATA_PORTABILITY_ENABLED=true
ENCRYPT_PHI_FIELDS=true
ENCRYPT_PII_FIELDS=true

# Performance Configuration
ASYNC_EXECUTOR_CORE_POOL_SIZE=5
ASYNC_EXECUTOR_MAX_POOL_SIZE=10
ASYNC_EXECUTOR_QUEUE_CAPACITY=100
SPRING_JPA_PROPERTIES_HIBERNATE_JDBC_FETCH_SIZE=50

# API Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST_CAPACITY=100

# OpenAPI/Swagger Documentation
SPRINGDOC_API_DOCS_PATH=/api-docs
SPRINGDOC_SWAGGER_UI_PATH=/swagger-ui.html
SPRINGDOC_SWAGGER_UI_ENABLED=true
SPRINGDOC_SHOW_ACTUATOR=true

# Azure Key Vault (Production)
AZURE_KEY_VAULT_URL=your-key-vault-url
AZURE_KEY_VAULT_ENCRYPTION_KEY_NAME=enrollment-encryption-key
AZURE_USE_MANAGED_IDENTITY=true

# Feature Flags
FEATURE_AI_TRIAGE_ENABLED=true
FEATURE_AUTO_APPROVAL_ENABLED=false
FEATURE_BULK_ENROLLMENT_ENABLED=true
FEATURE_DEPENDENT_ENROLLMENT_ENABLED=true
FEATURE_GUARDIAN_WORKFLOW_ENABLED=true

# Logging Configuration
LOGGING_FILE_NAME=logs/enrollment-service.log
LOGGING_FILE_MAX_SIZE=10MB
LOGGING_FILE_MAX_HISTORY=30
LOGGING_PATTERN_CONSOLE=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
LOGGING_PATTERN_FILE=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
